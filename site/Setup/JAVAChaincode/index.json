{
    "content": "<h2 id=\"java-chaincode\">Java chaincode</h2>\n<p>Note: This guide generally assumes you have followed the Chaincode development environment setup tutorial <a href=\"https://github.com/hyperledger/fabric/blob/master/docs/Setup/Chaincode-setup.md\">here</a>.</p>\n<h3 id=\"to-get-started-developing-java-chaincode\">To get started developing Java chaincode</h3>\n<ol>\n<li>Ensure you have gradle</li>\n<li>Download the binary distribution from <a href=\"http://gradle.org/gradle-download/\">http://gradle.org/gradle-download/</a></li>\n<li>Unpack, move to the desired location, and add gradle&rsquo;s bin directory to your system path</li>\n<li>Ensure <code>gradle -v</code> works from the command-line, and shows version 2.12 or greater</li>\n<li>Optionally, enable the <a href=\"https://docs.gradle.org/current/userguide/gradle_daemon.html\">gradle daemon</a> for faster builds</li>\n<li>Ensure you have the Java 1.8 <strong>JDK</strong> installed. Also ensure Java&rsquo;s directory is on your path with <code>java -version</code></li>\n<li>Additionally, you will need to have the <a href=\"https://docs.oracle.com/cd/E19182-01/821-0917/6nluh6gq9/index.html\"><code>JAVA HOME</code></a> variable set to your <strong>JDK</strong> installation in your system path</li>\n<li>\n<p>From your command line terminal, move to the <code>devenv</code> subdirectory of your workspace environment. Log into a Vagrant terminal by executing the following command:</p>\n<p><code>vagrant ssh</code></p>\n</li>\n<li>\n<p>Build and run the peer process.</p>\n<p><code>cd $GOPATH/src/github.com/hyperledger/fabric\nmake peer\npeer node start</code></p>\n</li>\n<li>\n<p>The following steps is for deploying chaincode in non-dev mode.</p>\n<ul>\n<li>Deploy the chaincode,</li>\n</ul>\n</li>\n</ol>\n<pre><code>    peer chaincode deploy -l java -p /opt/gopath/src/github.com/hyperledger/fabric/examples/chaincode/java/SimpleSample -c '{&quot;Args&quot;: [&quot;init&quot;, &quot;a&quot;,&quot;100&quot;, &quot;b&quot;, &quot;200&quot;]}'\n</code></pre>\n\n<p><code>6d9a704d95284593fe802a5de89f84e86fb975f00830bc6488713f9441b835cf32d9cd07b087b90e5cb57a88360f90a4de39521a5595545ad689cd64791679e9</code></p>\n<pre><code>    * This command will give the 'name' for this chaincode, and use this value in all the further commands with the -n (name) parameter\n\n\n    * PS. This may take a few minutes depending on the environment as it deploys the chaincode in the container,\n</code></pre>\n<ul>\n<li>Invoke a transfer transaction,</li>\n</ul>\n<pre><code>    peer chaincode invoke -l java \\\n    -n 6d9a704d95284593fe802a5de89f84e86fb975f00830bc6488713f9441b835cf32d9cd07b087b90e5cb57a88360f90a4de39521a5595545ad689cd64791679e9 \\\n    -c '{&quot;Args&quot;: [&quot;transfer&quot;, &quot;a&quot;, &quot;b&quot;, &quot;10&quot;]}'\n</code></pre>\n\n<p><code>c7dde1d7-fae5-4b68-9ab1-928d61d1e346</code></p>\n<ul>\n<li>Query the values of a and b after the transfer</li>\n</ul>\n<pre><code>    peer chaincode query -l java \\\n    -n 6d9a704d95284593fe802a5de89f84e86fb975f00830bc6488713f9441b835cf32d9cd07b087b90e5cb57a88360f90a4de39521a5595545ad689cd64791679e9 \\\n    -c '{ &quot;Args&quot;: [&quot;query&quot;, &quot;a&quot;]}'\n    {&quot;Name&quot;:&quot;a&quot;,&quot;Amount&quot;:&quot;80&quot;}\n\n\n    peer chaincode query -l java \\\n    -n 6d9a704d95284593fe802a5de89f84e86fb975f00830bc6488713f9441b835cf32d9cd07b087b90e5cb57a88360f90a4de39521a5595545ad689cd64791679e9 \\\n    -c '{ &quot;Args&quot;: [&quot;query&quot;, &quot;b&quot;]}'\n    {&quot;Name&quot;:&quot;b&quot;,&quot;Amount&quot;:&quot;220&quot;}\n</code></pre>\n\n<h3 id=\"java-chaincode-deployment-in-dev-mode\">Java chaincode deployment in DEV Mode</h3>\n<ol>\n<li>Follow the step 1 to 3 as above,</li>\n<li>Build and run the peer process</li>\n</ol>\n<pre><code>    cd $GOPATH/src/github.com/hyperledger/fabric\n    make peer\n    peer node start --peer-chaincodedev\n</code></pre>\n\n<ol>\n<li>Open the second Vagrant terminal, and change to Java shim root folder and run gradle build,</li>\n</ol>\n<pre><code>    cd $GOPATH/src/github.com/hyperledger/fabric/examples/chaincode/java/SimpleSample\n    gradle -b build.gradle build\n</code></pre>\n\n<ol>\n<li>\n<p>Run the SimpleSample chaincode using the <code>gradle -b build.gradle run</code></p>\n</li>\n<li>\n<p>Open the third Vagrant terminal to run init and invoke on the chaincode</p>\n<p>peer chaincode deploy -l java -n SimpleSample -c &lsquo;{&ldquo;Args&rdquo;: [&ldquo;init&rdquo;, &ldquo;a&rdquo;,&rdquo;100&rdquo;, &ldquo;b&rdquo;, &ldquo;200&rdquo;]}&rsquo;</p>\n</li>\n</ol>\n<pre><code>2016/06/28 19:10:15 Load docker HostConfig: %+v &amp;{[] [] []  [] false map[] [] false [] [] [] [] host    { 0} [] { map[]} false []  0 0 0 false 0    0 0 0 []}\n19:10:15.461 [crypto] main -&gt; INFO 002 Log level recognized 'info', set to INFO\nSimpleSample\n</code></pre>\n\n<pre><code>peer chaincode invoke -l java -n SimpleSample -c '{\"Args\": [\"transfer\", \"a\", \"b\", \"10\"]}'\n</code></pre>\n<pre><code>2016/06/28 19:11:13 Load docker HostConfig: %+v &amp;{[] [] []  [] false map[] [] false [] [] [] [] host    { 0} [] { map[]} false []  0 0 0 false 0    0 0 0 []}\n19:11:13.553 [crypto] main -&gt; INFO 002 Log level recognized 'info', set to INFO\n978ff89e-e4ef-43da-a9f8-625f2f6f04e5\n</code></pre>\n\n<pre><code>peer chaincode query -l java -n SimpleSample -c '{ \"Args\": [\"query\", \"a\"]}'\n</code></pre>\n<pre><code>2016/06/28 19:12:19 Load docker HostConfig: %+v &amp;{[] [] []  [] false map[] [] false [] [] [] [] host    { 0} [] { map[]} false []  0 0 0 false 0    0 0 0 []}\n19:12:19.289 [crypto] main -&gt; INFO 002 Log level recognized 'info', set to INFO\n{&quot;Name&quot;:&quot;a&quot;,&quot;Amount&quot;:&quot;90&quot;}\n</code></pre>\n\n<pre><code>peer chaincode query -l java -n SimpleSample -c '{\"Args\": [\"query\", \"b\"]}'\n</code></pre>\n<pre><code>2016/06/28 19:12:25 Load docker HostConfig: %+v &amp;{[] [] []  [] false map[] [] false [] [] [] [] host    { 0} [] { map[]} false []  0 0 0 false 0    0 0 0 []}\n19:12:25.667 [crypto] main -&gt; INFO 002 Log level recognized 'info', set to INFO\n{&quot;Name&quot;:&quot;b&quot;,&quot;Amount&quot;:&quot;210&quot;}\n</code></pre>\n\n<h3 id=\"developing-new-java-chaincode\">Developing new JAVA chaincode</h3>\n<ol>\n<li>Create a new Java project structure.</li>\n<li>Use existing <code>build.grade</code> from  any example JAVA Chaincode project like <code>examples/chaincode/java/SimpleSample</code>.</li>\n<li>Make your main class extend ChaincodeBase class and implement the following methods from base class.</li>\n<li><code>public String run(ChaincodeStub stub, String function, String[] args)</code></li>\n<li><code>public String query(ChaincodeStub stub, String function, String[] args)</code></li>\n<li><code>public String getChaincodeID()</code></li>\n<li>Modify the <code>mainClassName</code> in <code>build.gradle</code> to point to your new class.</li>\n<li>Build this project using <code>gradle -b build.gradle build</code></li>\n<li>Run this chaincode after starting a peer in dev-mode as above using <code>gradle -b build.gradle run</code></li>\n</ol>",
    "language": "en",
    "url": "/Setup/JAVAChaincode/",
    "title": "Java Chaincode Setup"
}